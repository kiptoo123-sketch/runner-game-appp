<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Runner Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { margin:0; background:#87CEEB; text-align:center; font-family:Arial,sans-serif; }
canvas { display:block; margin:10px auto; background:#fff; border-radius:10px; }
button { padding:10px 20px; font-size:16px; border:none; border-radius:8px; background:#00c853; color:#fff; margin:5px; }
</style>
</head>
<body>

<h2>üèÉ Runner Game</h2>
<canvas id="game" width="360" height="500"></canvas>
<p id="score">Score: 0</p>
<p id="coins">Coins: 0</p>
<p>Tap or press SPACE to jump</p>
<button id="restart" style="display:none;">Restart</button>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let score=0, coins=0, gameOver=false, soundUnlocked=false;

// --- Sounds ---
const jumpSound = new Audio("https://cdn.pixabay.com/audio/2022/03/15/audio_1b4b8f6e7a.mp3");
const coinSound = new Audio("https://cdn.pixabay.com/audio/2022/03/10/audio_3b4a2d5e90.mp3");
const overSound = new Audio("https://cdn.pixabay.com/audio/2022/03/15/audio_7c4c8c4b26.mp3");
[jumpSound, coinSound, overSound].forEach(s=>s.volume=0.6);

// --- Unlock sounds on first tap ---
function unlockSounds() {
  if(soundUnlocked) return;
  [jumpSound, coinSound, overSound].forEach(s => { s.play(); s.pause(); s.currentTime=0; });
  soundUnlocked = true;
}
document.addEventListener("click", unlockSounds, {once:true});
document.addEventListener("touchstart", unlockSounds, {once:true});

// --- Player ---
const player = {x:50, y:380, w:40, h:50, dy:0, gravity:0.8, jumpPower:-15, onGround:true};

// --- Obstacle ---
let obstacle = {x:canvas.width, y:410, w:30, h:30, speed:3};

// --- Coin ---
let coin = {x:canvas.width+200, y:330, r:10, taken:false};

// --- Jump ---
function jump() {
  if(player.onGround && !gameOver){
    player.dy = player.jumpPower;
    player.onGround=false;
    if(soundUnlocked) jumpSound.play();
  }
}
document.addEventListener("keydown", e=>{if(e.code==="Space") jump();});
document.addEventListener("touchstart", jump);

// --- Restart ---
document.getElementById("restart").onclick = ()=>location.reload();

// --- Game loop ---
function update() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Player physics
  player.dy += player.gravity;
  player.y += player.dy;
  if(player.y>=380){player.y=380; player.dy=0; player.onGround=true;}

  // Obstacle
  obstacle.x -= obstacle.speed;
  if(obstacle.x<-obstacle.w){
    obstacle.x = canvas.width + Math.random()*200;
    score++;
    document.getElementById("score").innerText="Score: "+score;
  }

  // Coin
  coin.x -= 3;
  if(coin.x<-10){ coin.x=canvas.width+200; coin.y=300+Math.random()*80; coin.taken=false; }

  // Collision: obstacle
  if(player.x<obstacle.x+obstacle.w && player.x+player.w>obstacle.x &&
     player.y<obstacle.y+obstacle.h && player.y+player.h>obstacle.y){
       gameOver=true;
       if(soundUnlocked) overSound.play();
       document.getElementById("restart").style.display="inline-block";
       return;
  }

  // Collision: coin
  if(!coin.taken){
    let dx=player.x+player.w/2-coin.x;
    let dy=player.y+player.h/2-coin.y;
    if(Math.sqrt(dx*dx+dy*dy)<25){
      coin.taken=true;
      coins++;
      document.getElementById("coins").innerText="Coins: "+coins;
      if(soundUnlocked) coinSound.play();
    }
  }

  // Draw player
  ctx.fillStyle="#000"; ctx.fillRect(player.x, player.y, player.w, player.h);
  // Draw obstacle
  ctx.fillStyle="red"; ctx.fillRect(obstacle.x, obstacle.y, obstacle.w, obstacle.h);
  // Draw coin
  if(!coin.taken){ ctx.fillStyle="gold"; ctx.beginPath(); ctx.arc(coin.x, coin.y, coin.r, 0, Math.PI*2); ctx.fill(); }

  requestAnimationFrame(update);
}

update();
</script>
</body>
</html>
